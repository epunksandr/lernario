{% extends "components/layout.html" %}

{% include "components/header.html" %}

{% block content %}

<div class="container py-4">
    <h3 class="mb-4">Notenübersicht</h3>
  
    {% for schueler in schueler_liste %}
      <div class="card mb-4 shadow-sm">
        <div class="card-header bg-light d-flex justify-content-between align-items-center">
          <div>
            <h5 class="mb-0">{{ schueler.vorname }} {{ schueler.nachname }}</h5>
            <small class="text-muted">Klasse {{ schueler.klasse }}</small>
          </div>
          <span class="badge bg-primary fs-6">Ø {{ schueler.notendurchschnitt }}</span>
        </div>
        <div class="card-body">
          <table class="table table-sm table-bordered mb-3">
            <thead class="table-light">
              <tr>
                <th>Fach</th>
                <th>Note</th>
                <th>Aktion</th>
              </tr>
            </thead>
            <tbody>
              {% for note in schueler.noten %}
                <tr>
                  <td>{{ note.fach }}</td>
                  <td>{{ note.note }}</td>
                  <td>
                    <a href="/noten/{{ schueler.id }}/edit/{{ note.fach }}" class="btn btn-sm btn-outline-warning">Bearbeiten</a>
                    <a href="/noten/{{ schueler.id }}/delete/{{ note.fach }}" class="btn btn-sm btn-outline-danger">Löschen</a>
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
  
          <a href="/noten/{{ schueler.id }}/add" class="btn btn-sm btn-success">➕ Note hinzufügen</a>
        </div>
      </div>
    {% endfor %}
  </div>

{% endblock %}